# 機能要件書：喋Lang (シャベラン)

## 1. ユーザー機能 (User Features)

### UF001: メモ作成画面表示
* **優先度:** Must | **確信度:** 1.00
* **説明:** ユーザーはアプリ起動後のメモ一覧画面からメモ作成ボタンをタップすることで、素早くメモ作成画面を開くことができる。
* **受入基準:** * ボタンタップ後、2秒以内に画面が表示されること。
    * 音声録音、文字入力、画像撮影へのアクセス手段が提供されていること。

### UF002: 音声メモ録音・再生
* **優先度:** Must | **確信度:** 1.00
* **説明:** 聞き取った単語やフレーズを音声として録音・再生し、正確な発音を確認できる。
* **受入基準:** * 録音開始/停止ボタンの配置。
    * 音声データがメモに紐づけて保存されること。
    * 保存された音声をタップで再生できること。

### UF003: 文字メモ入力・編集
* **優先度:** Must | **確信度:** 1.00
* **説明:** 単語の意味、品詞、例文、メモを文字入力・編集できる。
* **受入基準:** * 文字入力フィールドの提供。
    * 詳細画面で内容を編集し、再保存できること。

### UF004: 画像メモ撮影・表示
* **優先度:** Must | **確信度:** 1.00
* **説明:** カメラ機能で看板等の単語部分を撮影し、視覚的な状況を確認できる。
* **受入基準:** * カメラ起動ボタンの配置。
    * 画像がメモに紐づき、一覧・詳細画面でアイコン表示されること。

### UF005: メモ保存とカテゴリー分類
* **優先度:** Must | **確信度:** 1.00
* **依存関係:** UF006
* **説明:** 既存カテゴリーの選択（プルダウン）または新規作成ボタンによる分類。
* **受入基準:** * 保存後にメモ一覧へ反映されること。
    * カテゴリー選択プルダウンと新規作成用「＋」ボタンの配置。

### UF006: カテゴリー管理 (作成・選択・削除)
* **優先度:** Must | **確信度:** 0.90
* **説明:** カテゴリーのCRUD操作。削除時に関連メモの扱いを選択させる。
* **受入基準:** * 削除時に「未分類にする」か「他へ移動」かを選択するダイアログを表示すること。

### UF007: メモ一覧表示
* **優先度:** Must | **確信度:** 1.00
* **依存関係:** DMF001
* **説明:** アプリ起動時のメイン画面。カード形式でメモを表示。
* **受入基準:** * カテゴリー別、日付順にソート表示されること。
    * カードに「単語、意味、画像アイコン、登録年月日」が含まれること。

### UF008: メモ詳細表示・編集
* **優先度:** Must | **確信度:** 1.00
* **依存関係:** UF002, UF003, UF004, UF005
* **説明:** カードタップで全情報の確認・編集が可能。

### UF009: 復習機能開始
* **優先度:** Must | **確信度:** 1.00
* **説明:** メイン画面から復習セッションを開始する。

### UF010: 単語表示 (復習)
* **優先度:** Must | **確信度:** 1.00
* **依存関係:** UF011
* **説明:** フラッシュカード形式での表示。ヒントボタンで情報をポップアップ表示。

### UF011: 発音試行と評価結果表示
* **優先度:** Must | **確信度:** 1.00
* **依存関係:** IF001, SF003
* **説明:** Azure APIによる発音評価。不正確な場合は最後尾へ移動。間違えた音素を表示。

### UF012: 単語スキップ (復習)
* **優先度:** Must | **確信度:** 1.00
* **説明:** 発音せずに次の単語へ進む機能。

---

## 2. システム機能 (System Features)

### SF003: 発音評価結果処理
* **依存関係:** IF001, SF004
* **説明:** Azure APIからのJSONレスポンスを解析し、UIフィードバックに変換。

### SF004: 復習アルゴリズム管理 (間隔反復学習: SRS)
* **依存関係:** DMF003
* **説明:** 間隔反復（1, 3, 7, 30日後など）に基づき、次回復習予定日を算出。

---

## 3. データ管理機能 (Data Management Features)

### DMF001: メモデータCRUD
* **保存先:** Firebase Firestore
* **目標性能:** 応答・処理速度1秒以内。
* **データ構造:** 音声パス、テキスト、画像パス、カテゴリーID、登録日時。

---

## 4. 認証・外部連携 (Auth & Integration)

### AAF001: ユーザー認証 (OAuth2.0)
* **手法:** Google / Apple ログイン。セッション管理とデータ暗号化。

### IF001: Azure Pronunciation Assessment連携
* **目標:** 2秒以内のレスポンス。正確性スコアと音素フィードバックの取得。

### IF002: Google Cloud Translation API連携 (検討中)
* **優先度:** Should | **確信度:** 0.70